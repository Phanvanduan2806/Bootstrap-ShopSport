(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(51408)}])},51408:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return Ie},default:function(){return Re}});var r=n(85893),s=n(42121),i=n(67294),a=n(1798),l=n.n(a),o=n(55856),c=n(44104),u=n(66314),d=n(40114),m=n.n(d),h=n(34065),f=n(84937),v=n(6004),p=n(47568),x=n(70655),g=n(95714),b=n(84644),N=n(67841),y=n(53359),j=n(49734),w=n(9473),_=n(28444),E=function(e){var t=(0,u.$G)().t,n=e.data,s=(0,i.useState)(!1),a=s[0],o=s[1],d=function(){var e=(0,p.Z)((function(e){var n,r,s;return(0,x.__generator)(this,(function(i){switch(i.label){case 0:o(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,y.a.acceptFriend({userId:e})];case 2:return r=i.sent(),200===(null===(n=r.data)||void 0===n?void 0:n.code)?(l().publish(c.qz.RELOAD_FRIEND),l().publish(c.qz.RELOAD_FRIEND_REQUEST),l().publish(c.qz.ON_FRESH_DATA)):j.gU.error(t(null===(s=r.data)||void 0===s?void 0:s.message)),[3,5];case 3:return i.sent(),[3,5];case 4:return o(!1),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,p.Z)((function(e){var n,r,s;return(0,x.__generator)(this,(function(i){switch(i.label){case 0:o(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,y.a.rejectFriend({userId:e})];case 2:return r=i.sent(),200===(null===(n=r.data)||void 0===n?void 0:n.code)?(j.gU.success(t("Reject friend successfully")),l().publish(c.qz.RELOAD_FRIEND_REQUEST)):j.gU.error(t(null===(s=r.data)||void 0===s?void 0:s.message)),[3,5];case 3:return i.sent(),[3,5];case 4:return o(!1),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,r.jsx)("li",{className:"".concat(m()["user-item"]),children:(0,r.jsxs)("div",{className:"".concat(m()["wrap-user-item"]),children:[(0,r.jsx)("div",{className:"border rounded-full",children:(0,r.jsx)(g.ZP,{className:"object-cover",src:n.avatarUrl,name:n.userName,size:"46",round:!0})}),(0,r.jsx)("div",{className:m()["wrap-user-info"],children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h4",{className:"m-0 text-md truncate font-normal",title:b.D.escapeForTitleAttribute(n.userName),children:n.userName}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(N.z,{variant:"filled",loading:a,onClick:function(){return d(n.ownerId)},size:"xs",children:t("Confirm")}),(0,r.jsx)(N.z,{variant:"outline",loading:a,onClick:function(){return h(n.ownerId)},size:"xs",children:t("Delete")})]})]})})]})})},z=function(){var e,t,n=(0,u.$G)().t,s=(0,w.v9)(_.Ko);return(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold",children:n("Friend Requests")}),(null===s||void 0===s||null===(e=s.results)||void 0===e?void 0:e.length)<=0?(0,r.jsx)("div",{className:"text-gray text-center py-6",children:(0,r.jsx)("p",{className:"text-lg mt-0",children:n("No friend requests yet")})}):(0,r.jsx)("ul",{className:"flex flex-col gap-3 max-h-[50%] none-list overflow-hidden overflow-y-auto mb-6 mt-3",children:null===s||void 0===s||null===(t=s.results)||void 0===t?void 0:t.map((function(e){return(0,r.jsx)(E,{data:e},e.id)}))})]})},C=n(36289),O=n(95909),I=n(83317),R=n(96362),k=n(3594),F=n(64761),D=n(56817),T=Object.defineProperty,L=Object.defineProperties,S=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,q=(e,t,n)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))P.call(t,n)&&q(e,n,t[n]);if(A)for(var n of A(t))Z.call(t,n)&&q(e,n,t[n]);return e};const H={xs:180,sm:240,md:320,lg:360,xl:500,full:"100%"};function U({position:e,size:t,theme:n}){switch(e){case"top":return{top:0,left:0,right:0,height:n.fn.size({size:t,sizes:H})};case"bottom":return{bottom:0,left:0,right:0,height:n.fn.size({size:t,sizes:H})};case"right":return{bottom:0,top:0,right:0,width:n.fn.size({size:t,sizes:H})};case"left":return{bottom:0,top:0,left:0,width:n.fn.size({size:t,sizes:H})};default:return null}}var W=(0,D.k)(((e,{position:t,size:n,zIndex:r,withOverlay:s})=>{return{closeButton:{},overlay:{},body:{},root:{position:"fixed",zIndex:r,top:0,left:0,right:0,bottom:0,pointerEvents:!1===s?"none":void 0},drawer:(i=B({},U({position:t,size:n,theme:e})),a={maxWidth:"100%",maxHeight:"100vh",position:"fixed",outline:0,zIndex:1,pointerEvents:!1===s?"auto":void 0},L(i,S(a))),title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md}};var i,a})),$=n(83143),G=n(75933),M=n(7414),Q=n(82623),V=n(95117),X=n(34201),J=n(17577),K=Object.defineProperty,Y=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,ne=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const re={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},se={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},ie={position:"left",size:"md",transitionDuration:250,transitionTimingFunction:"ease",zIndex:(0,k.w)("modal"),shadow:"md",padding:0,lockScroll:!0,closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withOverlay:!0,withCloseButton:!0,withinPortal:!0,withFocusReturn:!0,overlayBlur:0};function ae(e){const t=(0,F.N4)("Drawer",ie,e),{className:n,opened:r,onClose:s,position:a,size:l,trapFocus:o,lockScroll:c,closeOnClickOutside:u,closeOnEscape:d,transition:m,transitionDuration:h,transitionTimingFunction:f,zIndex:v,overlayColor:p,overlayOpacity:x,children:g,withOverlay:b,shadow:N,id:y,padding:j,title:w,withCloseButton:_,closeButtonLabel:E,classNames:z,styles:k,target:D,withinPortal:T,overlayBlur:L,unstyled:S,withFocusReturn:A}=t,P=((e,t)=>{var n={};for(var r in e)ee.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Y)for(var r of Y(e))t.indexOf(r)<0&&te.call(e,r)&&(n[r]=e[r]);return n})(t,["className","opened","onClose","position","size","trapFocus","lockScroll","closeOnClickOutside","closeOnEscape","transition","transitionDuration","transitionTimingFunction","zIndex","overlayColor","overlayOpacity","children","withOverlay","shadow","id","padding","title","withCloseButton","closeButtonLabel","classNames","styles","target","withinPortal","overlayBlur","unstyled","withFocusReturn"]),Z=(0,C.M)(y),q=`${Z}-title`,B=`${Z}-body`,{classes:H,cx:U,theme:K}=W({size:l,position:a,zIndex:v,withOverlay:b},{classNames:z,styles:k,unstyled:S,name:"Drawer"}),ae=(0,O.P)(o&&r),[,le]=(0,I.P)(),oe=m||("rtl"===K.dir?se:re)[a],ce="number"===typeof x?x:"dark"===K.colorScheme?.85:.75,ue=e=>{"Escape"===e.key&&d&&s()};return(0,i.useEffect)((()=>{if(!o)return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)}),[o]),(0,R.u)({opened:r,shouldReturnFocus:o&&A}),i.createElement($.q,{withinPortal:T,target:D},i.createElement(G.p,{onExited:()=>le(!1),onEntered:()=>le(c&&!0),mounted:r,duration:h,timingFunction:f,transitions:{overlay:{duration:h/2,transition:"fade",timingFunction:"ease"},drawer:{duration:h,transition:oe,timingFunction:f}}},(e=>i.createElement(M.x,((e,t)=>{for(var n in t||(t={}))ee.call(t,n)&&ne(e,n,t[n]);if(Y)for(var n of Y(t))te.call(t,n)&&ne(e,n,t[n]);return e})({className:U(H.root,n),role:"dialog","aria-modal":!0,"aria-labelledby":q,"aria-describedby":B},P),i.createElement(Q.X,{className:U(H.drawer,n),ref:ae,style:e.drawer,radius:0,tabIndex:-1,onKeyDownCapture:e=>{var t;"true"!==(null==(t=e.target)?void 0:t.getAttribute("data-mantine-stop-propagation"))&&"Escape"===e.key&&d&&s()},shadow:N,p:j,unstyled:S},(w||_)&&i.createElement("div",{className:H.header},i.createElement(V.x,{id:q,className:H.title,unstyled:S},w),_&&i.createElement(X.P,{iconSize:16,onClick:s,"aria-label":E,className:H.closeButton,unstyled:S})),i.createElement("div",{id:B,className:H.body},g)),b&&i.createElement("div",{style:e.overlay},i.createElement(J.a,{unstyled:S,blur:L,onMouseDown:()=>u&&s(),className:H.overlay,opacity:ce,zIndex:0,color:p||("dark"===K.colorScheme?K.colors.dark[9]:K.black)}))))))}ae.displayName="@mantine/core/Drawer";var le=n(36990),oe=n(26042),ce=n(10753),ue=n(23769),de=n(86010),me=n(32951),he=n(96906),fe=n(33721),ve=n(48929),pe=function(e){var t,n,s,a,d=e.data,h=(null===d||void 0===d?void 0:d.notifyCount)>0,f=(0,u.$G)().t,v=(0,i.useState)(!1),N=v[0],_=v[1],E=(0,ce.O)((function(){return _(!1)})),z=(0,fe.r)().markSeenNotifyChat,C=(0,he.N)().clearHistories,O=(0,w.v9)(ve.tM),I=function(){var e=(0,p.Z)((function(e){return(0,x.__generator)(this,(function(t){return C(e.id),z(e.id),_(!1),[2]}))}));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=(0,p.Z)((function(e){var t;return(0,x.__generator)(this,(function(n){return(0,ue.gH)({message:f("Are you sure you want to unfriend {{name}}?",{name:null===e||void 0===e||null===(t=e.friend)||void 0===t?void 0:t.username}),onConfirm:(0,p.Z)((function(){var t,n,r,s,i;return(0,x.__generator)(this,(function(a){switch(a.label){case 0:return r=null===e||void 0===e||null===(t=e.friend)||void 0===t?void 0:t.id,[4,y.a.unFriend({userId:r})];case 1:return s=a.sent(),200===(null===(n=s.data)||void 0===n?void 0:n.code)?(j.gU.success(f("Unfriend successfully")),l().publish(c.qz.RELOAD_FRIEND),l().publish(c.qz.ON_FRESH_DATA),l().publish(c.qz.CLOSE_CHAT_WINDOW,{id:"".concat(r,"_").concat(null===O||void 0===O?void 0:O.id)}),l().publish(c.qz.CLOSE_CHAT_WINDOW,{id:"".concat(null===O||void 0===O?void 0:O.id,"_").concat(r)})):j.gU.error(f(null===(i=s.data)||void 0===i?void 0:i.message)),[2]}}))}))}),[2]}))}));return function(t){return e.apply(this,arguments)}}();return(0,r.jsxs)("li",{className:(0,de.Z)("flex items-center relative p-2 hover:bg-gray-200 rounded-lg cursor-pointer",m()["chat-room-root"]),children:[(0,r.jsxs)("div",{className:"".concat(m()["wrap-user-item"]),onClick:function(){l().publish(c.qz.OPEN_CHAT,{data:d}),setTimeout((function(){var e=document.getElementById("detail-chat-".concat(d.id));null!=e&&e.scrollTo(0,e.scrollHeight)}),200)},children:[(0,r.jsx)("div",{className:"border rounded-full",children:(0,r.jsx)(g.ZP,{className:"object-cover",src:null===d||void 0===d||null===(t=d.friend)||void 0===t?void 0:t.avatarUrl,name:null===d||void 0===d||null===(n=d.friend)||void 0===n?void 0:n.username,size:"46",round:!0})}),(0,r.jsx)("div",{className:m()["wrap-user-info"],children:(0,r.jsx)("div",{className:"flex flex-col",children:(0,r.jsx)("h4",{className:"m-0 text-md truncate font-normal",style:{fontWeight:h?"600":"400"},title:b.D.escapeForTitleAttribute(null===d||void 0===d||null===(s=d.friend)||void 0===s?void 0:s.username),children:null===d||void 0===d||null===(a=d.friend)||void 0===a?void 0:a.username})})})]}),(0,r.jsx)("span",{className:(0,de.Z)("sub-menu-btn",{"shadow-[0_2px_6px_rgba(0,_0,_0,_0.1)] bg-white":N}),onClick:function(){return _(!N)},children:(0,r.jsx)(o.Z,{name:"dots-menu"})}),h&&(0,r.jsx)("span",{className:(0,de.Z)(m()["has-notice"],"right-[20px] top-1/2")}),N&&(0,r.jsxs)("ul",{ref:E,className:"".concat(m()["sub-menu"]," min-w-[160px] absolute top-[52px] right-1 t-full rounded-lg bg-white z-10 p-1 text-sm"),children:[(0,r.jsx)(xe,{onClick:function(){return I(d)},children:(0,r.jsxs)("div",{className:"flex items-center gap-3 font-bold p-1",children:[(0,r.jsx)(me.HG,{width:20,height:20}),f("Delete chat")]})}),(0,r.jsx)(xe,{onClick:function(){return R(d)},children:(0,r.jsxs)("div",{className:"flex items-center gap-3 font-bold p-1",children:[(0,r.jsx)(me.kI,{width:20,height:20}),f("Unfriend")]})})]})]})},xe=function(e){return(0,r.jsx)("li",(0,oe.Z)({className:"chat-option hover:bg-blue-light text-ink-primary transition-all cursor-pointer px-2 py-1 rounded"},e))},ge=n(77470),be=function(e){var t=e.isPresearch,n=(0,u.$G)().t;return(0,r.jsxs)("div",{className:"text-gray text-center pt-4 ",children:[(0,r.jsx)("span",{className:"text-gray-light",children:(0,r.jsx)(o.Z,{name:"search",size:56})}),(0,r.jsx)("p",{className:"text-lg",children:t?n("Type the name of users you are searching for!"):n("No results found")+"!"})]})},Ne=n(88767),ye=n(96486),je=function(e){var t=(0,u.$G)().t,n=(0,w.v9)(ve.tM),s=e.data,a=e.onOpenChatBox,o=e.refetch,d=s.status==c.k8.BeFriend,m=(s.status,c.k8.UnFriend,s.status==c.k8.Requested),h=m&&s.ownerId!==(null===n||void 0===n?void 0:n.id),f=(0,i.useState)(!1),v=f[0],_=f[1],E=(0,i.useRef)(null),z={id:s.userId>n.id?"".concat(n.id,"_").concat(s.userId):"".concat(s.userId,"_").concat(null===n||void 0===n?void 0:n.id),lastMessageTimestamp:new Date,roomType:"Private",friend:{id:s.userId,active:s.status===c.k8.BeFriend,username:s.userName,fullName:s.userName,avatarUrl:s.avatarUrl,addedBy:s.ownerId},active:s.status===c.k8.BeFriend,ownerId:-1,notifyCount:0},C=function(){var e=(0,p.Z)((function(){var e,n,r;return(0,x.__generator)(this,(function(i){switch(i.label){case 0:_(!0),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,y.a.acceptFriend({userId:s.userId})];case 2:return n=i.sent(),200!==(null===(e=n.data)||void 0===e?void 0:e.code)?[3,4]:(l().publish(c.qz.RELOAD_FRIEND),l().publish(c.qz.ON_FRESH_DATA),[4,o()]);case 3:return i.sent(),[3,5];case 4:j.gU.error(t(null===(r=n.data)||void 0===r?void 0:r.message)),i.label=5;case 5:return[3,8];case 6:return i.sent(),[3,8];case 7:return _(!1),[7];case 8:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,p.Z)((function(){var e,n,r;return(0,x.__generator)(this,(function(i){switch(i.label){case 0:_(!0),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,y.a.addFriend({userId:s.userId,requestMessage:""})];case 2:return n=i.sent(),200!==(null===(e=n.data)||void 0===e?void 0:e.code)?[3,4]:(l().publish(c.qz.RELOAD_FRIEND_REQUEST),[4,o()]);case 3:return i.sent(),[3,5];case 4:j.gU.error(t(null===(r=n.data)||void 0===r?void 0:r.message)),i.label=5;case 5:return[3,8];case 6:return i.sent(),[3,8];case 7:return _(!1),[7];case 8:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.jsx)("li",{className:(0,de.Z)("flex items-center relative rounded-lg p-2 cursor-pointer hover:bg-gray-200"),onClick:function(e){E.current&&E.current.contains(e.target)||a(z)},children:(0,r.jsxs)("div",{className:"flex items-center relative gap-3 w-full",children:[(0,r.jsx)("div",{className:"border rounded-full",children:(0,r.jsx)(g.ZP,{className:"object-cover",src:s.avatarUrl,name:s.userName,size:"46",round:!0})}),(0,r.jsxs)("div",{className:"w-[calc(100%_-_68px)] flex items-center gap-4 justify-between",children:[(0,r.jsx)(V.x,{className:"m-0 text-sm truncate font-semibold",title:b.D.escapeForTitleAttribute(s.userName),children:s.userName}),h?(0,r.jsx)(N.z,{loading:v,onClick:function(){return C()},variant:"filled",className:"min-w-[100px] flex-none",size:"xs",ref:E,children:t("Accept")}):(0,r.jsxs)(N.z,{onClick:function(){return O()},disabled:d||m,variant:"filled",loading:v,className:"min-w-[100px] flex-none",size:"xs",ref:E,children:[!d&&!m&&t("Add friend"),d&&t("Be friend"),m&&t("Invited")]})]})]})})},we=function(){var e=(0,u.$G)().t,t=(0,i.useState)(""),n=t[0],s=t[1],a=(0,i.useState)(!1),d=a[0],m=a[1],h=(0,i.useRef)(null),f=(0,i.useRef)(null),v=(0,i.useRef)(null),g=(0,Ne.useQuery)(["search-user",n],(0,p.Z)((function(){var e,t,r;return(0,x.__generator)(this,(function(s){switch(s.label){case 0:return(t=(0,ye.trim)(n)).length<2?[2]:[4,y.a.searchUser({filter:t})];case 1:return r=s.sent(),[2,null===(e=r.data)||void 0===e?void 0:e.data]}}))}))),b=g.data,N=g.refetch;(0,i.useEffect)((function(){var e=function(e){h.current&&!h.current.contains(e.target)&&f.current&&!f.current.contains(e.target)&&v.current&&!v.current.contains(e.target)&&_()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[h,f]);var j=d?"":"hidden",w=function(e){l().publish(c.qz.OPEN_CHAT,{data:e}),setTimeout((function(){var t=document.getElementById("detail-chat-".concat(e.id));null!=t&&t.scrollTo(0,t.scrollHeight)}),200)},_=function(){m(!1),s("")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[d&&(0,r.jsx)("div",{onClick:_,className:"flex-none flex items-center justify-center items-center cursor-pointer hover:bg-gray-200 rounded-full h-8 w-8",children:(0,r.jsx)(o.Z,{name:"arrow-left",size:20})}),(0,r.jsx)("div",{className:"w-full",ref:f,children:(0,r.jsx)(ge.o,{value:n,onChange:function(e){return s(e.currentTarget.value)},onFocus:function(){return m(!0)},autoComplete:"off",placeholder:e("Search"),classNames:{root:"flex-grow",input:"bg-gray-lighter border-none rounded-3xl"},icon:d?null:(0,r.jsx)(o.Z,{name:"search",size:20,className:"text-gray"})})})]}),(0,r.jsxs)("div",{ref:h,className:"".concat(j," overflow-y-auto"),style:{maxHeight:"calc(100vh - 108px)",marginTop:"12px"},children:[(0,r.jsxs)("div",{style:{height:"calc(100vh - 108px)"},className:"h-full ".concat(0==n.length||n.length>0&&b&&0==b.length?"hidden":""),children:[(0,r.jsxs)("div",{className:"flex items-center flex-wrap text-md font-semibold pt-2",children:[(0,r.jsx)("span",{className:"pl-2 text-blue pr-2 flex items-center",children:(0,r.jsx)(o.Z,{name:"search",size:24})}),e('Search results for "{{name}}"',{name:n})]}),(0,r.jsx)("div",{className:"chat-contents py-2 overflow-hidden overflow-y-auto pt-0 h-full pb-2",style:{height:"calc(100% - 56px)"},children:(0,r.jsx)("div",{id:"list-friend",className:"content mb-3 pb-2 border-b-1 ".concat((null===b||void 0===b?void 0:b.length)>0?"":"hidden"),children:(0,r.jsx)("ul",{className:"mt-4 flex gap-1 flex-col none-list overflow-hidden overflow-y-auto pb-10",children:null===b||void 0===b?void 0:b.map((function(e){return(0,r.jsx)(je,{onOpenChatBox:w,data:e,refetch:N},e.userId)}))})})})]}),(0,r.jsx)("div",{ref:v,className:"".concat(0==n.length?"":"hidden"),style:{height:0==n.length?"calc(100vh - 108px)":""},children:(0,r.jsx)(be,{isPresearch:!0})}),(0,r.jsx)("div",{className:"".concat(n.length>0&&b&&0==b.length?"":"hidden"),style:{height:n.length>0&&b&&0==b.length?"calc(100vh - 108px)":""},children:(0,r.jsx)(be,{isPresearch:!1})})]})]})},_e=function(e){var t=e.data;return(0,r.jsx)("li",{className:"".concat(m()["user-item"]),children:(0,r.jsxs)("div",{className:"".concat(m()["wrap-user-item"]),children:[(0,r.jsx)("div",{className:"border rounded-full",children:(0,r.jsx)(g.ZP,{className:"object-cover",src:t.avatarUrl,name:t.userName,size:"46",round:!0})}),(0,r.jsx)("div",{className:m()["wrap-user-info"],children:(0,r.jsx)("div",{className:"flex flex-col",children:(0,r.jsx)("h4",{className:"m-0 text-md truncate font-normal",title:b.D.escapeForTitleAttribute(t.userName),children:t.userName})})})]})})},Ee=function(){var e,t,n=(0,u.$G)().t,s=(0,w.v9)(_.zg);return(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold",children:n("Sent Requests")}),(null===s||void 0===s||null===(e=s.results)||void 0===e?void 0:e.length)<=0?(0,r.jsx)("div",{className:"text-gray text-center py-6",children:(0,r.jsx)("p",{className:"text-lg mt-0",children:n("Haven't sent any invitations yet")})}):(0,r.jsx)("ul",{className:"flex flex-col gap-3 none-list overflow-hidden overflow-y-auto mb-6 mt-3",children:null===s||void 0===s||null===(t=s.results)||void 0===t?void 0:t.map((function(e){return(0,r.jsx)(_e,{data:e},e.id)}))})]})},ze=n(69728),Ce=function(){var e=(0,u.$G)().t,t=(0,w.I0)(),n=(0,h.a)("(min-width: 768px)"),a=(0,w.v9)(_.Ze),d=(0,w.v9)(le.H$),p=(0,w.v9)(le.y6),x=(0,w.v9)((function(e){var t;return null===(t=e.friend.received)||void 0===t?void 0:t.rowCount}))||0,g=(0,f.Z)(),b=(0,s.z)().refetch,N=(0,i.useState)(!1),y=N[0],j=N[1],E=function(e){e?g.postMessage(v.$["EDV.API.Chat.open"]):(g.postMessage(v.$["EDV.API.Chat.close"]),l().publish(c.qz.CLOSE_ALL_CHAT_WINDOW),j(!1)),t((0,le.nV)(e))};(0,i.useEffect)((function(){var e=l().subscribe(c.qz.TOGGLE_CHAT_BOX,(function(){E(!0)}));return function(){E(!1),l().publish(c.qz.CLOSE_ALL_CHAT_WINDOW),l().unsubscribe(e)}}),[]);var C=function(e){e.preventDefault(),j((function(e){return e?b():(l().publish(c.qz.RELOAD_FRIEND_REQUEST),l().publish(c.qz.RELOAD_FRIEND_INVITES)),!e}))};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(ae,{lockScroll:!n,size:400,opened:!0,onClose:function(){return E(!1)},position:"right",classNames:{title:"mr-0",body:"mr-2",header:"m-0 block relative",closeButton:"absolute top-1 right-2"},title:"",children:(0,r.jsxs)("div",{className:"bg-white w-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 px-3 mr-3 py-3 pt-8",children:[y&&(0,r.jsxs)("div",{onClick:C,className:"items-center gap-2 text-blue-pressed flex items-center cursor-pointer hover:text-blue-primary",children:[(0,r.jsx)(o.Z,{name:"arrow-left",size:24}),(0,r.jsx)("h3",{className:"font-semibold text-xl m-0",children:e("Chat")})]}),!y&&(0,r.jsx)("h3",{className:"font-semibold text-xl m-0",children:e("Chat")}),y?null:(0,r.jsxs)("div",{onClick:C,className:"hover:text-blue-primary cursor-pointer font-semibold outline-none relative",children:[e("Friends"),x>0&&(0,r.jsx)("span",{className:(0,de.Z)(m()["has-notice"],"top-0 right-[-12px]")})]})]}),(0,r.jsxs)("div",{className:m().wrapper,id:"chat-group",children:[!y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"px-3",children:[(0,r.jsx)(we,{}),(0,r.jsx)(ze.xv,{className:"font-bold pt-3",children:a?e("Maximum number of friends: {{count}}/{{total}}",{total:a.maxSetting,count:a.rowCount}):null})]}),d&&(0,r.jsx)("div",{className:m().body,children:p&&p.length>0?(0,r.jsx)("ul",{className:"flex flex-col gap-1 none-list mb-10 pb-4",children:p.map((function(e){return(0,r.jsx)(pe,{data:e},e.id)}))}):(0,r.jsx)("div",{className:"text-gray text-center py-6",children:(0,r.jsx)("p",{className:"text-lg mt-0",children:e("There have been no friend yet")})})})]}),y&&(0,r.jsxs)("div",{className:m().body,children:[(0,r.jsx)(z,{}),(0,r.jsx)(Ee,{})]})]})]})})})},Oe=n(58551),Ie=!0,Re=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ce,{}),(0,r.jsx)(Oe.Z,{})]})}},40114:function(e){e.exports={wrapper:"ChatRoomList_wrapper__1O1Cp",body:"ChatRoomList_body__wuNfd","user-item":"ChatRoomList_user-item__DZORW","wrap-user-info":"ChatRoomList_wrap-user-info__3yJNx","wrap-user-item":"ChatRoomList_wrap-user-item__WkkNT","chat-item":"ChatRoomList_chat-item__mJw4W","wrap-chat-item":"ChatRoomList_wrap-chat-item___PCB_","wrap-chat-info":"ChatRoomList_wrap-chat-info__cllL_","sub-menu":"ChatRoomList_sub-menu__VnHTa","chat-room-root":"ChatRoomList_chat-room-root__m5NQg","has-notice":"ChatRoomList_has-notice__gmHsR"}}},function(e){e.O(0,[829,856,551,774,888,179],(function(){return t=48312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);